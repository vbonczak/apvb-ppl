%The Vincent Package, 2012
%Major version 2020/07/05
%Last changes 2020/07/20 : real numbers
%2021/06/30 : Minor bug fixes in accents
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{vincent}[2021/06/30 written by Vincent Bonczak]

\def\vincent{vincent}

\RequirePackage[nottoc]{tocbibind}
\RequirePackage{manfnt}
\RequirePackage{stmaryrd}

\RequirePackage{amsthm,amsmath,amsfonts,amssymb}

\RequirePackage{xcolor}


\newif\ifoption@french
\newif\ifoption@frtoc
\newif\ifoption@frenchaggr
\newif\ifoption@thsame
\newif\ifoption@thall
\newif\ifoption@th
\newif\ifoption@box
\newif\ifoption@fancytitle
\newif\ifoption@logic
\newif\ifoption@graphs
\newif\ifoption@frtoc
\newif\ifoption@ltxdoc
\newif\ifoption@interactive
%%%%%%%%%%%%%%%%%%%%%%%%%%% Beginning of options processing %%%%%%%%%%%%%%%%%%%%%%%%%%%

\DeclareOption{ltxdoc}{\option@ltxdoctrue}

\DeclareOption{frenchaggr}{\option@frenchaggrtrue}

%%Français
\DeclareOption{french}{\option@frenchtrue}

\DeclareOption{frtoc}{\option@frtoctrue}

\DeclareOption{fancytitle}{\option@fancytitletrue}


\DeclareOption{graphs}{\option@graphstrue}

\DeclareOption{interactive}{\option@interactivetrue}

\DeclareOption{thsame}{\option@thsametrue}

\DeclareOption{th}{\option@thtrue}

\DeclareOption{thall}{\option@thalltrue}

\DeclareOption{boxes}{\option@boxtrue}

\DeclareOption{logic}{\option@logictrue}

\DeclareOption*{\PackageWarning{\vincent}{undefined option \CurrentOption}}

\ProcessOptions\relax

%%%%%%%%%%%%%%%%%%%%%%%%%%% End of options processing %%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifoption@logic
\RequirePackage{bussproofs}
\newcommand{\lam}[1]{\lambda{#1}\cdot}

	\newcommand{\F}{\mathcal F}
	\newcommand{\s}{\sigma}
	\newcommand{\al}{\alpha}
	\newcommand{\bl}{\beta}
	\newcommand{\U}{\mathcal U}
	\newcommand{\T}{\mathcal T} 
	\renewcommand{\S}{\mathcal S}
	\renewcommand{\P}{\mathcal P}
	\newcommand{\M}{\mathcal M}
	\newcommand{\cK}{\mathcal K}
	\newcommand{\fv}{\mathsf{fv}}
	%Arbres de preuve
	\newcommand{\I}{\textrm{I}}
	\newcommand{\E}{\textrm{E}}
	 \newcommand{\G}{\Gamma}
	 \newcommand{\ax}{\RightLabel{ax}
	\AxiomC{}}

	\newcommand{\etI}{$\land_\I$}
	\newcommand{\etEa}{$\land_\E^1$}
	\newcommand{\etEb}{$\land_\E^2$}

	\newcommand{\ouE}{$\lor_\E$}
	\newcommand{\ouIa}{$\lor_\I^1$}
	\newcommand{\ouIb}{$\lor_\I^2$}

	\newcommand{\implE}{$\impl_\E$}
	\newcommand{\implI}{$\impl_\I$}

	\newcommand{\negI} {$\neg_\I$}
	\newcommand{\botE} {$\bot_\E$}
	\newcommand{\topI} {$\top_\I$}
	\newcommand{\negE} {$\neg_\E$}
										 
	\newcommand{\exE}  {$\exists_\E$}
	\newcommand{\exI}  {$\exists_\I$}
	\newcommand{\prE}  {$\forall_\E$}
	\newcommand{\prI}  {$\forall_\I$}

	\newcommand{\RetI}   {\RightLabel{$\land_\I$}  }
	\newcommand{\RetEa}  {\RightLabel{$\land_\E^1$}}
	\newcommand{\RetEb}  {\RightLabel{$\land_\E^2$}} 
	\newcommand{\RouE}   {\RightLabel{  $\lor_\E$} }
	\newcommand{\RouIa}  {\RightLabel{$\lor_\I^1$} }
	\newcommand{\RouIb}  {\RightLabel{$\lor_\I^2$} } 
	\newcommand{\RimplE} {\RightLabel{$\impl_\E$}  }
	\newcommand{\RimplI} {\RightLabel{$\impl_\I$}  } 
	\newcommand{\RnegI}  {\RightLabel{$\neg_\I$}   }
	\newcommand{\RbotE}  {\RightLabel{$\bot_\E$}   }
	\newcommand{\RtopI}  {\RightLabel{$\top_\I$}   }
	\newcommand{\RnegE}  {\RightLabel{$\neg_\E$}   } 
	\newcommand{\RexE}   {\RightLabel{$\exists_\E$}}
	\newcommand{\RexI}   {\RightLabel{$\exists_\I$}}
	\newcommand{\RprE}   {\RightLabel{$\forall_\E$}}
	\newcommand{\RprI}   {\RightLabel{$\forall_\I$}}


	\newcommand{\RAA}{\textsf{RAA}}
	\newcommand{\RRAA}{\RightLabel{\RAA}}
	\newcommand{\LK}{\textsf{LK}}
	\newcommand{\NK}{\textsf{NK}}

	\newcommand{\seqT}[1]{\TrinaryInfC{$#1$}}
	\newcommand{\seqB}[1]{\BinaryInfC{$#1$}}
	\newcommand{\seqU}[1]{\UnaryInfC{$#1$}}

	\newcommand{\fact}{
	\RightLabel{fact}
	}

	\newcommand{\res}{
	\RightLabel{res}
	}
\fi

\ifoption@interactive
	\ifoption@french
		\RequirePackage[french, colorinlistoftodos]{todonotes}
	\else
		\RequirePackage[colorinlistoftodos]{todonotes}
	\fi

	\newcommand{\QUESTION}[1]{\color[rgb]{1,0,0}#1\color[rgb]{0,0,0}}
	\newcommand{\TODO}[1]{\color[rgb]{0,0.4,0}#1\color[rgb]{0,0,0}}
	\newcommand{\NEW}[1]{\color[rgb]{0,0,0.7}#1\color[rgb]{0,0,0}}

	%%%% Annotations
	\setlength{\marginparwidth}{1in}

	\newcommand{\vb}[1]{\todo[size=\scriptsize,backgroundcolor=black!10,linecolor=black!20,bordercolor=black!20]{#1}}
	\newcommand{\Vb}[1]{\todo[inline,backgroundcolor=black!10,linecolor=black!20,bordercolor=black!20]{#1}}
	\AtEndDocument{
		\newpage
		\todototoc
		\listoftodos 
	}
	
	%% \newTodo{Nom de la personne, optionnel}{nom commande}{nom commande en inline}{couleur de fond}{couleur de bordure}
	\newcommand{\newTodo}[5][\relax]{%
\ifx\relax#1
%
\expandafter\newcommand\csname#2\endcsname[2][]{%
\todo[size=\scriptsize,backgroundcolor=#4,linecolor=#5,bordercolor=#5,##1]{##2}}
%
\expandafter\newcommand\csname#3\endcsname[2][]{%
\todo[inline,backgroundcolor=#4,linecolor=#5,bordercolor=#5,##1]{##2}}
%
	\else
%
\expandafter\newcommand\csname#2\endcsname[2][]{%
\todo[size=\scriptsize,backgroundcolor=#4,linecolor=#5,bordercolor=#5,##1]{\textbf{#1:} ##2}}
%
\expandafter\newcommand\csname#3\endcsname[2][]{%
\todo[inline,backgroundcolor=#4,linecolor=#5,bordercolor=#5,##1]{\textbf{#1:} ##2}}
	
\fi
}
\fi %option interactive

\ifoption@box
	\RequirePackage[most]{tcolorbox}
	\tcbuselibrary{breakable}

	%%%Usage : \newColorBoxEnv{name}{background color}
	\newcommand{\newColorBoxEnv}[2]{
		\newenvironment{#1}{\begin{tcolorbox}[enhanced,title=,
												frame hidden,
												colback=#2,
												breakable,
												left=10pt,
												right=10pt,
												top=10pt,
												bottom=10pt,
												boxsep=0mm,
												arc=0mm,boxrule=0pt,
												nobeforeafter, 
												]}
												{\end{tcolorbox}}}
\fi

\ifoption@graphs
	\RequirePackage{tikz}
	\usetikzlibrary{shapes ,arrows,automata,fit,backgrounds}
	\tikzset{every picture/.style={execute at begin picture={\shorthandoff{:;!?};\tikzstyle{every state}=[shape=circle];},
	->,>=stealth',auto,node distance=2cm,semithick,initial text={}}}

	%\@ifpackagewith{<name>}{<option-list>}{<true>}{<false>}

	\newenvironment{tikzpetit}
	{\begin{tikzpicture}[node distance = 1.5cm]
	\tikzstyle{every state}=[shape=circle,minimum size=0.8cm];}
	{\end{tikzpicture}}

	\newenvironment{tikzpetit2}
	{\begin{tikzpicture}[node distance = 1cm]
	\tikzstyle{every state}=[minimum size=0.8cm];}
	{\end{tikzpicture}}
\fi

\ifoption@fancytitle
	\RequirePackage[tc]{titlepic}
\fi

\ifoption@french
	\ifoption@frenchaggr %%Agressive remplacing
		\def\leq{\leqslant}
		\def\geq{\geqslant}
	\else
		\newcommand{\leqf}{\leqslant}
		\newcommand{\geqf}{\geqslant}
	\fi
	\AddThinSpaceBeforeFootnotes 
	\FrenchFootnotes
\fi

%%%% Texte 
\newcommand\ecute{\acute e}
\newcommand{\intv}[1]{\llbracket #1 \rrbracket}
 
\newcommand{\N}{\mathbb N}
\newcommand{\Z}{\mathbb Z}
\newcommand{\K}{\mathbb K}
\newcommand{\Q}{\mathbb Q}
\newcommand{\C}{\mathbb C}
\newcommand{\R}{\mathbb R}
\newcommand{\im}{\mathrm{Im}\,}
\newcommand{\ke}{\mathrm{Ker}\,}
\newcommand{\Id}{\mathrm{Id}\,}
\newcommand{\Dim}{\mathrm{dim}\,} 
\newcommand{\rg}{\mathrm{rg}\,}
\newcommand{\vect}{\mathrm{Vect}\,}
\newcommand{\re}{\mathrm{Re}\,}
\newcommand{\e}{\mathrm{e}}
 \newcommand{\B}{\mathcal B}
\newcommand{\mat}{\mathcal M}
\newcommand{\Mat}{\mathrm {Mat}}
\newcommand{\nil}{\mathrm{Nil}\,}
\newcommand{\vhi}{\varphi}
\newcommand{\eps}{\varepsilon}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\thir}{\frac{1}{3}}
\newcommand{\quat}{\frac{1}{4}}
\newcommand{\bmid}{\;\middle|\;}

\newcommand{\cZ}{\mathcal{Z}}
\newcommand{\cC}{\mathcal{C}} 

\newcommand{\scal}[1]{\langle #1 \rangle}
\newcommand{\dd}{\mathrm d}

\newcommand{\impl}{\mathrel{\Rightarrow}}
\newcommand{\lif}{\mathrel{\Leftrightarrow}}
\newcommand{\sqsubsetneq}{\mathrel{_\not\kern-0.45em\sqsubseteq}}
 
\newcommand{\LCS}{\mathsf{LCS}}
 %% DIVERS
 
\newcommand{\dans}{\mathrel{\longrightarrow}}
\newcommand{\questionOuverte}{\par\noindent\textbf{Question ouverte : }}


\newcommand{\parties}[1]{\mathcal P(#1)}

\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\ii}{\mathrm i}

\ifoption@th
%%%% Environnements numérotés, couleurs de fond
%\RequirePackage{mdframed}
\theoremstyle{definition}
\newtheorem{exemple}{Exemple}
\newtheorem{defi}{D\'efinition}
\newtheorem{prop}{Proposition}
\newtheorem{coro}{Corollaire}
\newtheorem{lem}{Lemme}
\newtheorem{theorem}{Th\'eor\`eme}
\newtheorem{ex}{Exercice}

\theoremstyle{remark}
\newtheorem{rem}{Remarque}
\else
	\ifoption@thsame
		\theoremstyle{definition}
		\newtheorem{defi}{D\'efinition}
		\newtheorem{exemple}[defi]{Exemple}
		
		\newtheorem{prop}[defi]{Proposition}
		\newtheorem{coro}[defi]{Corollaire}
		\newtheorem{lem}[defi]{Lemme}
		\newtheorem{theorem}{Th\'eor\`eme}
		\newtheorem{ex}{Exercice}

		\theoremstyle{remark}
		\newtheorem{rem}[defi]{Remarque}
	\else
		\ifoption@thall
			\theoremstyle{definition}
			\newtheorem{defi}{D\'efinition}
			\newtheorem{exemple}[defi]{Exemple}
			
			\newtheorem{prop}[defi]{Proposition}
			\newtheorem{coro}[defi]{Corollaire}
			\newtheorem{lem}[defi]{Lemme}
			\newtheorem{theorem}[defi]{Th\'eor\`eme}
			\newtheorem{ex}[defi]{Exercice}

			\theoremstyle{remark}
			\newtheorem{rem}[defi]{Remarque}
		\fi
	\fi
\fi

%%%% Liens et détails
\ifoption@ltxdoc
	\RequirePackage{hypdoc}
	\hypersetup{hidelinks}
\else
	\RequirePackage[hidelinks]{hyperref}
\fi

\ifoption@frtoc
 
		\addto\captionsfrench{ 
\renewcommand\contentsname{Sommaire}
}
		  
	 
\fi

\newcommand{\hurl}[2][\relax]{\texttt{\ifx\relax#1\url{#2}\else \href{#1#2}{#2}\fi }}

\newcommand{\pdftitle}[1]{   \renewcommand{\pdf@title}{#1}}
\newcommand{\pdfauthor}[1]{  \renewcommand{\pdf@author}{#1}}
\newcommand{\pdfsubject}[1]{ \renewcommand{\pdf@subject}{#1}} 
\newcommand{\pdfkeywords}[1]{\renewcommand{\pdf@keywords}{#1}}

\def\pdf@title{}
\def\pdf@author{}
\def\pdf@subject{} 
\def\pdf@keywords{}

\newcommand{\toPdfTitle}[1]{#1 \pdftitle{#1}}
\newcommand{\toPdfAuthor}[1]{#1 \pdfauthor{#1}}
\AtBeginDocument{
\hypersetup
{ 
		pdftitle={\pdf@title},    
		pdfauthor={\pdf@author},      
		pdfsubject={\pdf@subject},    
		pdfkeywords=\pdf@keywords
}
 }
\newcommand{\m}[2]{\texorpdfstring{#1}{#2}}

%% Notes de bas de page dans des minipages ou cadres
\newcommand{\footnotetocome}[1]{\hyperlink{#1}{\footnotemark[\the\numexpr\value{footnote}+1]}}
\newcommand{\footnotecame}[1]{\hyperlink{#1}{\footnotemark[\the\numexpr\value{footnote}]}}
\newcommand{\footnotethere}[2]{\refstepcounter{footnote}\footnotetext{\hypertarget{#1}{#2}}}